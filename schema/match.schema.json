{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://sf6-chapter.example.com/schemas/match.json",
  "title": "SF6 Match Data",
  "description": "SF6対戦シーンの詳細情報",
  "type": "object",
  "required": ["id", "videoId", "videoTitle", "videoPublishedAt", "startTime", "player1", "player2", "detectedAt"],
  "properties": {
    "id": {
      "type": "string",
      "description": "対戦データの一意識別子（videoId_startTime形式推奨）",
      "pattern": "^[A-Za-z0-9_-]+$"
    },
    "videoId": {
      "type": "string",
      "description": "YouTube動画ID",
      "pattern": "^[A-Za-z0-9_-]{11}$"
    },
    "videoTitle": {
      "type": "string",
      "description": "YouTube動画タイトル"
    },
    "videoPublishedAt": {
      "type": "string",
      "format": "date-time",
      "description": "YouTube動画の公開日時（ISO 8601形式）"
    },
    "startTime": {
      "type": "integer",
      "description": "対戦開始時刻（秒）",
      "minimum": 0
    },
    "endTime": {
      "type": "integer",
      "description": "対戦終了時刻（秒）",
      "minimum": 0
    },
    "player1": {
      "type": "object",
      "description": "プレイヤー1の情報",
      "required": ["character"],
      "properties": {
        "character": {
          "type": "string",
          "description": "使用キャラクター名（正規化済み）"
        },
        "characterRaw": {
          "type": "string",
          "description": "Gemini APIの生認識結果"
        },
        "playerName": {
          "type": "string",
          "description": "プレイヤー名（取得可能な場合）"
        },
        "side": {
          "type": "string",
          "enum": ["left", "right"],
          "description": "画面上の位置"
        }
      }
    },
    "player2": {
      "type": "object",
      "description": "プレイヤー2の情報",
      "required": ["character"],
      "properties": {
        "character": {
          "type": "string",
          "description": "使用キャラクター名（正規化済み）"
        },
        "characterRaw": {
          "type": "string",
          "description": "Gemini APIの生認識結果"
        },
        "playerName": {
          "type": "string",
          "description": "プレイヤー名（取得可能な場合）"
        },
        "side": {
          "type": "string",
          "enum": ["left", "right"],
          "description": "画面上の位置"
        }
      }
    },
    "detectedAt": {
      "type": "string",
      "format": "date-time",
      "description": "検出処理日時（ISO 8601形式）"
    },
    "confidence": {
      "type": "number",
      "description": "検出信頼度（0.0-1.0）",
      "minimum": 0,
      "maximum": 1
    },
    "templateMatchScore": {
      "type": "number",
      "description": "テンプレートマッチングのスコア",
      "minimum": 0,
      "maximum": 1
    },
    "frameTimestamp": {
      "type": "integer",
      "description": "検出フレームのタイムスタンプ（ミリ秒）",
      "minimum": 0
    }
  }
}
